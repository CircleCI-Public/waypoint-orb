description: |
  Simple job to automatically deploy your application using Waypoint.

parameters:
  setup:
    type: steps
    default: []
    description: Steps to take before initializing Waypoint and deploying the site.
  version:
    type: string
    default: "2020.11"
    description: Version of the cimg/base Docker image to use.
  workspace:
    type: string
    default: ""
    description: >
      Workspace to work in for this deployment.

executor:
  name: default
  tag: << parameters.version >>

steps:
  - checkout
  - steps: << parameters.setup >>
  - init:
      workspace: <<parameters.workspace>>
  - up:
      workspace: <<parameters.workspace>>
